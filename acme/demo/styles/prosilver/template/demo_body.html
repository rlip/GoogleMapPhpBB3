<!-- INCLUDE overall_header.html -->
<!-- IF S_USER_LOGGED_IN -->
<div id="map" style="height: 500px"></div>
<script>
    function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 6,
                    center: {lat: 52.5, lng: 18.5}
                }),
                data = JSON.parse('{USERS_DATA}');
        data.forEach(function (row) {
            addMarker(row.location, row.username, map);
        });
    }
    function addMarker(location, username, map) {
        var marker = new google.maps.Marker({
                    position: location,
                    animation: google.maps.Animation.DROP,
                    map: map,
                    title: username
                }),
                infowindow = new google.maps.InfoWindow({
                    content: '<div><strong><a href="{ROOT_PATH}memberlist.php?mode=viewprofile&un=' + username + '">' + username + '</a></strong></div>'
                });
        marker.addListener('click', function () {
            infowindow.open(map, marker);
        });
    }
</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCPmc3roNWNNKp3HKD9IfYDkiKCJgNCANc&callback=initMap">
</script>
<!-- ENDIF -->
<!-- INCLUDE overall_footer.html -->
